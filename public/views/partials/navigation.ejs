        <!-- Game Status Display -->
        <div class="time-display">
            <div id="gameTime">Loading...</div>
            <span id="marketStatus" class="market-status">...</span>
            <span id="gameSpeed" style="margin-left: 15px; font-size: 0.9em;">...</span>
        </div>
        
        <div class="nav">
            <a href="/">ğŸ  Portal</a> |
            <a href="/bank">ğŸ¦ Bank</a> |
            <a href="/trading">ğŸ“ˆ Trading</a> |
            <a href="/indexfunds">ğŸ“Š Index Funds</a> |
            <a href="/pendingorders">ğŸ“‹ Pending Orders</a> |
            <a href="/graphs">ğŸ“‰ Charts</a> |
            <a href="/advanced-charts">ğŸ“Š Advanced Charts</a> |
            <a href="/events">ğŸ“œ Events</a> |
            <a href="/crypto">â‚¿ Crypto</a> |
            <a href="/bonds">ğŸ’° Bonds</a> |
            <a href="/loans">ğŸ’³ Loans</a> |
            <a href="/taxes">ğŸ“‘ Taxes</a> |
            <a href="/news" id="newsNavLink">ğŸ“° News<span id="newsBadgeNav" class="nav-badge" style="display: none;"></span></a> |
            <a href="/email" id="emailNavLink">ğŸ“§ Email<span id="emailBadgeNav" class="nav-badge" style="display: none;"></span></a>
        </div>
        
        <script>
        // Update game time, market status, and speed on all pages
        async function updateGameStatus() {
            try {
                const response = await fetch('/api/time');
                const data = await response.json();
                const date = new Date(data.currentTime);
                
                const timeEl = document.getElementById('gameTime');
                if (timeEl) {
                    const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });
                    const dateString = date.toLocaleDateString();
                    const timeString = date.toLocaleTimeString();
                    timeEl.textContent = `${dayOfWeek}, ${dateString}, ${timeString}`;
                }
                
                const statusEl = document.getElementById('marketStatus');
                if (statusEl) {
                    if (data.isMarketOpen) {
                        statusEl.textContent = 'ğŸŸ¢ MARKET OPEN';
                        statusEl.className = 'market-status market-open';
                    } else {
                        statusEl.textContent = 'ğŸ”´ MARKET CLOSED';
                        statusEl.className = 'market-status market-closed';
                    }
                }
                
                const speedEl = document.getElementById('gameSpeed');
                if (speedEl) {
                    let speedText = '';
                    if (data.isPaused) {
                        speedText = 'â¸ PAUSED';
                    } else if (data.timeMultiplier === 1) {
                        speedText = 'ğŸ• Speed: Realtime (1s = 1s)';
                    } else if (data.timeMultiplier === 60) {
                        speedText = 'ğŸŒ Speed: Slow (1s = 1min)';
                    } else if (data.timeMultiplier === 3600) {
                        speedText = 'âš¡ Speed: Normal (1s = 1hr)';
                    } else if (data.timeMultiplier === 86400) {
                        speedText = 'ğŸš€ Speed: Fast (1s = 1day)';
                    } else if (data.timeMultiplier === 2592000) {
                        speedText = 'ğŸ“… Speed: Monthly (1s = 1month)';
                    } else {
                        speedText = `â± Speed: Custom (1s = ${data.timeMultiplier}s)`;
                    }
                    speedEl.textContent = speedText;
                }
            } catch (error) {
                console.error('Error updating game status:', error);
            }
        }
        
        // Update notification badges
        async function updateNavNotifications() {
            try {
                // Get unread counts from localStorage
                const readNewsIds = new Set(JSON.parse(localStorage.getItem('readNewsIds') || '[]'));
                const readEmailIds = new Set(JSON.parse(localStorage.getItem('readEmailIds') || '[]'));
                
                // Fetch current news and emails
                const [newsResponse, emailResponse] = await Promise.all([
                    fetch('/api/news'),
                    fetch('/api/emails')
                ]);
                
                const newsData = await newsResponse.json();
                const emailData = await emailResponse.json();
                
                // Calculate unread counts
                const unreadNewsCount = newsData.filter(item => !readNewsIds.has(item.id)).length;
                const unreadEmailCount = emailData.filter(item => !readEmailIds.has(item.id)).length;
                
                // Update news badge
                const newsBadge = document.getElementById('newsBadgeNav');
                if (newsBadge) {
                    if (unreadNewsCount > 0) {
                        newsBadge.textContent = unreadNewsCount > 99 ? '99+' : unreadNewsCount;
                        newsBadge.style.display = 'inline-block';
                    } else {
                        newsBadge.style.display = 'none';
                    }
                }
                
                // Update email badge
                const emailBadge = document.getElementById('emailBadgeNav');
                if (emailBadge) {
                    if (unreadEmailCount > 0) {
                        emailBadge.textContent = unreadEmailCount > 99 ? '99+' : unreadEmailCount;
                        emailBadge.style.display = 'inline-block';
                    } else {
                        emailBadge.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Error updating nav notifications:', error);
            }
        }
        
        // Initialize and update
        updateGameStatus();
        updateNavNotifications();
        setInterval(updateGameStatus, 1000);
        setInterval(updateNavNotifications, 3000); // Update badges every 3 seconds
        </script>
